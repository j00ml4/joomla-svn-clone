<mos:comment>
@version $Id: view.html,v 1.5 2005/08/31 17:28:51 facedancer Exp $
@package Mambo
@copyright (C) 2000 - 2005 Miro International Pty Ltd
@license http://www.gnu.org/copyleft/gpl.html GNU/GPL
</mos:comment>

<style type="text/css">
	<!--
	.separator {
	  position: relative;
	  margin: 3px;
	  border-left: 1px solid ButtonShadow;
	  border-right: 1px solid ButtonHighlight;
	  width: 0px;
	  height: 16px;
	  padding: 0px;
	}

	.manager {
		width: 100%;
		overflow: auto;
		display: block;
	}

	.statusLayer {
		background:#FFFFFF;
		border: 1px solid #CCCCCC;
	}

	.statusText {
		font-family: Verdana, Arial, Helvetica, sans-serif;
		font-size: 15px;
		font-weight: bold;
		color: #6699CC;
		text-decoration: none;
	}

	div.nodirectory {
		font-size: large;
		font-weight: bold;
		color: #CC0000;
		font-family: Helvetica, sans-serif;
		text-align: center;
	}
	div.dropdown {
		vertical-align: middle;
		height: 30px;
		text-align: center;
	}

	div.noimages {
		font-size: large;
		font-weight: bold;
		color: #CCCCCC;
		font-family: Helvetica, sans-serif;
	}
	div.imgTotal {
		border: 1px solid threedface;
		margin: 2px;
	}
	div.imgBorder {
		height: 70px;
		vertical-align: middle;
		width: 90px;
		overflow: hidden;
		border-bottom: 1px solid threedface;
		margin: 2px;
	}
	div.imgBorder a {
		height: 70px;
		width: 90px;
		display: block;
	}
	div.imgBorder a:hover {
		height: 68px;
		width: 88px;
		background-color: #E9EFF5; 
		border: 1px solid #B5CDE8; 
		color : #FF6600; 
	}
	.imgBorderHover {
		background: #FFFFCC;
		cursor: hand;
	}
	.imginfoBorder {
		height: 35px;
		border-top: 1px solid threedface;
		margin: 2px;
		vertical-align: middle;
		width: 90px;
		overflow: hidden
	}

	.buttonHover {
		border: 1px solid;
		border-color: ButtonHighlight ButtonShadow ButtonShadow ButtonHighlight;
		cursor: hand;
		background: #FFFFCC;
	}

	.buttonOut {
	 border: 0px;
	}

	.imgCaption {
		font-size: 9pt;
		font-family: "MS Shell Dlg", Helvetica, sans-serif;
		text-align: center;
	}
	.dirField {
		font-size: 9pt;
		font-family: "MS Shell Dlg", Helvetica, sans-serif;
		width:110px;
	}
	div.image {
		padding-top: 20px;
	}
	ul.quicktip {
		padding: 0 0 0 10px;
	}
	
	.mmError {
		color: red;
		font-weight: bold;
	}
	-->
</style>

<script language="javascript" type="text/javascript">
	function deleteImage( file ) {
		if ( confirm( "<mos:Translate>Delete file</mos:Translate>"+file ) ) {
			return true;
		}
		return false;
	}

	function deleteFolder(folder, numFiles) {
		if ( numFiles > 1 ) {
			return confirm( "<mos:Translate>Delete folder</mos:Translate> \""+folder+"\"? <mos:Translate>This folder contains files and/or folders.</mos:Translate>");
		}
		if ( confirm( "<mos:Translate>Delete folder</mos:Translate> \""+folder+"\"?" ) ) {
			return true;
		}
		return false;
	}

	function submitbutton( pressbutton ) {
		var form = document.adminForm;

		if (pressbutton == 'showUpload') {
			dhtml.hideElem( 'newdir-container' );
			dhtml.showElem( 'upload-container' );
		} else if ( pressbutton == 'showNewDir' ) {
			dhtml.hideElem( 'upload-container' );
			dhtml.showElem( 'newdir-container' );
		} else {
			submitform( pressbutton, form );
		}
	}
	
	var counter = 0;
	
	function moreFields()
	{
		counter++;
		var newFields = document.getElementById('upload-file-dummy').cloneNode(true);
		newFields.id = '';
		newFields.style.display = 'block';
		var newField = newFields.childNodes;
		for (var i=0;i<newField.length;i++)
		{
			var theName = newField[i].name
			if (theName)
				newField[i].name = theName;
		}
		var insertHere = document.getElementById('upload-file-container-root');
		insertHere.parentNode.insertBefore(newFields,insertHere);
	}
	
	
</script>
<script language="javascript" type="text/javascript" src="{SITEURL}/includes/js/overlib_mini.js"></script>
<script language="javascript" type="text/javascript" src="{SITEURL}/includes/js/overlib_hideform_mini.js"></script>
<div id="overDiv" style="position:absolute; visibility:hidden; z-index:10000;"></div>
<div id="treecell">
	<fieldset>
		<legend>
			<mos:Translate>Directory Structure</mos:Translate>
		</legend>
		<mos:tmpl src="tree.html" />
	</fieldset>

	<fieldset>
		<legend>
			<mos:Translate>Related Links</mos:Translate>
		</legend>
		<mos:tmpl src="relatedLinks.html" varscope="body"/>
	</fieldset>

	<fieldset>
		<legend>
			<mos:Translate>Quick Tip</mos:Translate>
		</legend>
		<ul class="quicktip">
			<li>
				<mos:Translate key="Quicktiptext 1"></mos:Translate>
			</li>
			<li>
			<mos:Translate key="Quicktiptext 2"></mos:Translate>		
			</li>
		</ul>
	</fieldset>
</div>

<div id="datacell">
	<fieldset>
		<legend>
			<mos:Translate>Files</mos:Translate> : {LISTDIR}
		</legend>
		{MESSAGES}
		<!-- dummy node just for massive upload -->
		<div id="upload-file-dummy" style="display:none">
			<mos:Translate>Select File</mos:Translate>
			<br/>
			<input class="button" name="upload[]" type="file" size="70" value="" />
			<input class="button" type="button" value="Remove input"  
					onClick="this.parentNode.parentNode.removeChild(this.parentNode);">					
			<br/>
		</div>	
		<!-- end of dummy node for massive upload -->
		
		<div id="upload-container" style="display:none">
			<div id="upload-file-container">
				<fieldset>
					<legend>
						<mos:Translate>Upload a File</mos:Translate>
					</legend>
					<div id="upload-file-container">
						
							<mos:Translate>Select File</mos:Translate>
							<br/>
							<input class="button" name="upload[]" type="file" size="70" value="" />
							<br/>
					</div>
					<div id="upload-file-container-root">
					</div>
					<div style="margin-top: 5px; margin-bottom: 5px;"><input class="button" type="button" value="Add another file" onClick="moreFields();" /></div>
					[ <mos:Translate>Max size</mos:Translate> = {POST_MAX_SIZE} ]
					<input class="button" type="button" value="<mos:Translate>Upload</mos:Translate>" name="fileupload" onclick="javascript:submitbutton('upload')" />
					
					
					<a href="#close" onclick="dhtml.hideElem('upload-container')" style="float:right">			
						<mos:Translate>Close</mos:Translate>
						<img src="{ADMINURL}/images/publish_x.png" border="0" alt=""/></a>
				</fieldset>			
			</div>
		</div>

		<div id="newdir-container" style="display:none">
			<fieldset>
				<legend>
					<mos:Translate>Create a Directory</mos:Translate>
				</legend>

				<mos:Translate>Directory Name</mos:Translate>
				<br/>
				<input class="inputbox" name="foldername" type="text" size="60" />

				<br/>
				<input class="button" type="button" value="<mos:Translate>Create</mos:Translate>" onclick="javascript:submitbutton('create_folder')" />

				<a href="#close" onclick="dhtml.hideElem('newdir-container')" style="float:right">
					<mos:Translate>Close</mos:Translate>
					<img src="{ADMINURL}/images/publish_x.png" border="0" alt=""/></a>
			<fieldset>
		</div>
		
			<div>
				{LISTIMAGES}
				<mos:tmpl type="condition" conditionvar="style" varscope="list-items">
					<mos:sub condition="details">
						<table class="adminlist" id="moslist">
							<thead>
								<tr>	
									<th width="10">
									<input type="checkbox" class="selector" name="toggle" value="" />
									</th>
									<th width="10" class="title">Icon</th>
									<th class="title">
									<a href="#reorder" onclick="goDoTask(this, 'submit-reorder', 'task=reorder,col=name')" class="col_ordering">
										<mos:Translate>Name</mos:Translate>
										<mos:tmpl type="simplecondition" requiredvars="ordercol=name" varscope="body">
											<img src="{SITEURL}/images/M_images/sort{ORDERDIRN}.png" alt="" border="0" />
										</mos:tmpl>
									</a>
									</th>
									<th nowrap="nowrap" width="5%" class="center">
									<a href="#reorder" onclick="goDoTask(this, 'submit-reorder', 'task=reorder,col=size')" class="col_ordering">
										<mos:Translate>Size</mos:Translate>
										<mos:tmpl type="simplecondition" requiredvars="ordercol=size" varscope="body">
											<img src="{SITEURL}/images/M_images/sort{ORDERDIRN}.png" alt="" border="0" />
										</mos:tmpl>
									</a>
									</th>
									
									<th nowrap="nowrap" width="5%">
										<mos:Translate>Dimensions</mos:Translate>
									</th>
									
									
									<th nowrap="nowrap" width="5%" class="center">
									<a href="#reorder" onclick="goDoTask(this, 'submit-reorder', 'task=reorder,col=type')" class="col_ordering">
										<mos:Translate>Type</mos:Translate>
										<mos:tmpl type="simplecondition" requiredvars="ordercol=type" varscope="body">
											<img src="{SITEURL}/images/M_images/sort{ORDERDIRN}.png" alt="" border="0" />
										</mos:tmpl>
									</a>
									</th>
									<th width="10">&nbsp;</th>
									<th width="10">&nbsp;</th>
									<th width="10">&nbsp;</th>
								</tr>
							</thead>
							
							<tfoot>

							</tfoot>
							
							<tbody>
							<mos:link src="list-items" />	
							</tbody>
						</table>
					</mos:sub>
					<mos:sub condition="icons">
						<mos:link src="list-items" />					
					</mos:sub>
				</mos:tmpl>
			</div>
		</fieldset>
		<div>
			<mos:Translate>Code Generated</mos:Translate>
			<br/>
			<textarea name="imagecode" id="imagecode" rows="5" cols="60"/></textarea>
			<br/>
			<input type="button" value="<mos:Translate>Select All</mos:Translate>" class="button" onclick="this.form.imagecode.focus();this.form.imagecode.select();" />
			<input type="reset" value="<mos:Translate>Reset</mos:Translate>" class="button" />
		</div>
	</fieldset>
</div>

<mos:link src="include-tooltips" />


<input type="hidden" name="task" value="{TASK}" />
<input type="hidden" name="client" value="{CLIENT_ID}" />
<input type="hidden" name="option" value="{OPTION}" />
<input type="hidden" name="orderCol" value="{ORDERCOL}" />
<input type="hidden" name="orderDirn" value="{ORDERDIRN}" />
<input type="hidden" name="listdir" value="{LISTDIR}" />
<input type="hidden" name="lastdir" value="{LASTDIR}" />
<input type="hidden" name="style" value="{STYLE}" />

<mos:tmpl name="move-list" requiredvars="save_move_list" type="simplecondition">
	<input type="hidden" name="cid[]" value="{NAME}" /></mos:tmpl>