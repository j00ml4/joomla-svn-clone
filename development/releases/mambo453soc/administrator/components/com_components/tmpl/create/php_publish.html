<pat:comment>
@version $Id: php_publish.html,v 1.1 2005/08/25 14:14:14 johanjanssens Exp $
@package Mambo
@copyright (C) 2000 - 2005 Miro International Pty Ltd
@license http://www.gnu.org/copyleft/gpl.html GNU/GPL
</pat:comment>
	/**
	 * Publishes or Unpublishes one or more records
	 */
	function publish() {
		global $database, $my, $_LANG;

		$cid = mosGetParam( $_POST, 'cid', array(0) );
		mosArrayToInts( $cid, array() );

		$cids = implode( ',', $cid );
		$value = intval( $this->getTask() == 'publish' );
	
		$query = 'UPDATE #__{BASENAME}'
		. ' SET published = ' . $database->Quote( $value )
		. ' WHERE id IN (' . $cids . ')'
		. ' AND (checked_out = \'0\' OR checked_out = ' . $database->Quote( $my->id ) . ')'
		;
		$database->setQuery( $query );
		$database->query();
		$msg = $database->getErrorMsg();

		$this->setRedirect( 'index2.php?option=com_{BASENAME}', $msg );
	}
